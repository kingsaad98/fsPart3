{"version":3,"sources":["services.js","index.js"],"names":["baseUrl","App","useState","persons","setPersons","newName","setNewName","newPhone","setNewPhone","searchValue","setSearchValue","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","axios","get","then","response","console","log","data","catch","error","message","success","handleSearchChange","e","target","value","handleNameChange","handlePhoneChange","handleSubmit","preventDefault","find","person","name","alert","newObject","phone","id","post","concat","setTimeout","err","addPerson","deletePerson","window","confirm","delete","remove","filter","Filter","onChange","PersonForm","onSubmit","type","People","includes","map","idx","number","toLowerCase","key","onClick","Success","className","Error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.833837c6.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  return axios.post(baseUrl, newObject);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  return axios.put(`${baseUrl}/${id}`, newObject);\r\n};\r\n\r\nconst remove = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`);\r\n};\r\n\r\nexport { getAll, create, update, remove };\r\n","import React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { getAll, create, remove } from \"./services\";\nimport \"./index.css\";\n\nconst App = () => {\n  // the state of our apps\n  const [persons, setPersons] = useState(null);\n  const [newName, setNewName] = useState(\"\");\n  const [newPhone, setNewPhone] = useState(\"\");\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  // asking for data when the component mounts\n  useEffect(() => {\n    getAll()\n      .then((response) => {\n        console.log(\"promise fulfilled\");\n        setPersons(response.data);\n      })\n      .catch((error) => {\n        setErrorMessage(error.message, \"try again\");\n      });\n  }, [setPersons]);\n\n  // inputs handles\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handlePhoneChange = (e) => {\n    setNewPhone(e.target.value);\n  };\n\n  const handleSearchChange = (e) => {\n    setSearchValue(e.target.value);\n  };\n\n  // handle add person Submit\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const addPerson = () => {\n      const person = {\n        name: newName,\n        phone: newPhone,\n        id: newPhone,\n      };\n      create(person)\n        .then((response) => {\n          setPersons(persons.concat(response.data));\n          setSuccessMessage(`added ${person.name}`);\n          setTimeout(function () {\n            setSuccessMessage(null);\n          }, 3000);\n        })\n        .catch((err) => {\n          setErrorMessage(`error when adding ${person.name}`);\n          setTimeout(function () {\n            setErrorMessage(null);\n          }, 3000);\n        });\n\n      setNewName(\"\");\n      setNewPhone(\"\");\n    };\n\n    persons.find((person) => person.name === newName)\n      ? alert(`${newName} has already been registered to your phonebook`)\n      : addPerson();\n  };\n\n  // Delete person logic\n  const deletePerson = (name, id) => {\n    if (window.confirm(`do you really wanna delete ${name}`)) {\n      remove(id)\n        .then((response) => {\n          setSuccessMessage(`deleted ${name}`);\n          setTimeout(function () {\n            setSuccessMessage(null);\n          }, 3000);\n        })\n        .catch((err) => {\n          setErrorMessage(`${name}'s data is already deleted`);\n          setTimeout(function () {\n            setErrorMessage(null);\n          }, 3000);\n        });\n\n      setPersons(persons.filter((person) => person.id !== id));\n    }\n    return;\n  };\n\n  return (\n    <div>\n      <Success success={successMessage} />\n      <Error error={errorMessage} />\n      <h2>Phonebook</h2>\n      <Filter\n        searchValue={searchValue}\n        handleSearchChange={handleSearchChange}\n      />\n\n      <h3>Add a new</h3>\n      <PersonForm\n        handleNameChange={handleNameChange}\n        handlePhoneChange={handlePhoneChange}\n        handleSubmit={handleSubmit}\n      />\n\n      <h3>Numbers</h3>\n      <People\n        deletePerson={deletePerson}\n        persons={persons}\n        searchValue={searchValue}\n      />\n    </div>\n  );\n};\n\n// Components\n\nconst Filter = ({ searchValue, handleSearchChange }) => {\n  return (\n    <div>\n      filter show with:\n      <input value={searchValue} onChange={handleSearchChange} />\n    </div>\n  );\n};\n\nconst PersonForm = ({\n  newName,\n  handleSubmit,\n  handleNameChange,\n  newPhone,\n  handlePhoneChange,\n}) => {\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        name: <input value={newName} onChange={handleNameChange} />\n      </div>\n      <div>\n        Number: <input value={newPhone} onChange={handlePhoneChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nconst People = ({ searchValue, persons, deletePerson }) => {\n  return (\n    <div>\n      {persons\n        ?.filter((person) => person.name.includes(searchValue))\n        ?.map(\n          ({ name, number, id }, idx) =>\n            name.toLowerCase().includes(searchValue) && (\n              <p key={id}>\n                {name} {number}\n                <button onClick={() => deletePerson(name, id)}>delete</button>\n              </p>\n            )\n        )}\n    </div>\n  );\n};\n\nconst Success = ({ success }) => {\n  if (success === null) {\n    return null;\n  }\n\n  return <h6 className=\"success\"> {success}</h6>;\n};\n\nconst Error = ({ error }) => {\n  if (error === null) {\n    return null;\n  }\n\n  return <h6 className=\"error\"> {error}</h6>;\n};\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}