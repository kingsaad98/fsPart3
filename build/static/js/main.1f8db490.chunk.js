(this.webpackJsonpmonster=this.webpackJsonpmonster||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(2),u=t(0),c=t.n(u),r=t(13),l=t.n(r),o=t(3),i=t.n(o),m="/api/persons",s=(t(36),function(){var e=Object(u.useState)(null),n=Object(a.a)(e,2),t=n[0],r=n[1],l=Object(u.useState)(""),o=Object(a.a)(l,2),s=o[0],v=o[1],g=Object(u.useState)(""),p=Object(a.a)(g,2),j=p[0],O=p[1],w=Object(u.useState)(""),N=Object(a.a)(w,2),C=N[0],S=N[1],y=Object(u.useState)(null),k=Object(a.a)(y,2),T=k[0],V=k[1],J=Object(u.useState)(null),P=Object(a.a)(J,2),x=P[0],A=P[1];Object(u.useEffect)((function(){i.a.get(m).then((function(e){console.log("promise fulfilled"),r(e.data)})).catch((function(e){A(e.message,"try again")}))}),[r]);return c.a.createElement("div",null,c.a.createElement(b,{success:T}),c.a.createElement(E,{error:x}),c.a.createElement("h2",null,"Numberbook"),c.a.createElement(d,{searchValue:C,handleSearchChange:function(e){S(e.target.value)}}),c.a.createElement("h3",null,"Add a new"),c.a.createElement(f,{handleNameChange:function(e){v(e.target.value)},handleNumberChange:function(e){O(e.target.value)},handleSubmit:function(e){e.preventDefault();t.find((function(e){return e.name===s}))?alert("".concat(s," has already been registered to your Numberbook")):function(){var e,n={name:s,number:j};(e=n,i.a.post(m,e)).then((function(e){r(t.concat(e.data)),V("added ".concat(n.name)),setTimeout((function(){V(null)}),3e3)})).catch((function(e){A("error when adding ".concat(n.name)),setTimeout((function(){A(null)}),3e3)})),v(""),O("")}()}}),c.a.createElement("h3",null,"Numbers"),c.a.createElement(h,{deletePerson:function(e,n){window.confirm("do you really wanna delete ".concat(e))&&(function(e){return i.a.delete("".concat(m,"/").concat(e))}(n).then((function(n){V("deleted ".concat(e)),setTimeout((function(){V(null)}),3e3)})).catch((function(n){A("".concat(e,"'s data is already deleted")),setTimeout((function(){A(null)}),3e3)})),r(t.filter((function(e){return e.id!==n}))))},persons:t,searchValue:C}))}),d=function(e){var n=e.searchValue,t=e.handleSearchChange;return c.a.createElement("div",null,"filter show with:",c.a.createElement("input",{value:n,onChange:t}))},f=function(e){var n=e.newName,t=e.handleSubmit,a=e.handleNameChange,u=e.newNumber,r=e.handleNumberChange;return c.a.createElement("form",{onSubmit:t},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:n,onChange:a})),c.a.createElement("div",null,"Number: ",c.a.createElement("input",{value:u,onChange:r})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add")))},h=function(e){var n,t=e.searchValue,a=e.persons,u=e.deletePerson;return c.a.createElement("div",null,null===a||void 0===a||null===(n=a.filter((function(e){return e.name.includes(t)})))||void 0===n?void 0:n.map((function(e,n){var a=e.name,r=e.number,l=e.id;return a.toLowerCase().includes(t)&&c.a.createElement("p",{key:l},a," ",r,c.a.createElement("button",{onClick:function(){return u(a,l)}},"delete"))})))},b=function(e){var n=e.success;return null===n?null:c.a.createElement("h6",{className:"success"}," ",n)},E=function(e){var n=e.error;return null===n?null:c.a.createElement("h6",{className:"error"}," ",n)};l.a.render(c.a.createElement(s,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.1f8db490.chunk.js.map