{"version":3,"sources":["services.js","index.js"],"names":["baseUrl","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","searchValue","setSearchValue","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","axios","get","then","response","data","catch","error","message","success","handleSearchChange","e","target","value","handleNameChange","handleNumberChange","handleSubmit","preventDefault","id","newObject","person","name","number","registered","find","put","filter","concat","setTimeout","err","post","create","addPerson","deletePerson","window","confirm","delete","remove","Filter","onChange","PersonForm","onSubmit","type","People","includes","map","toLowerCase","key","onClick","Success","className","Error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c116fb8f.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = \"http://localhost:3001/api/persons\";\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  return axios.post(baseUrl, newObject);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  return axios.put(`${baseUrl}/${id}`, newObject);\r\n};\r\n\r\nconst remove = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`);\r\n};\r\n\r\nexport { getAll, create, update, remove };\r\n","import React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { getAll, create, remove, update } from \"./services\";\nimport \"./index.css\";\n\nconst App = () => {\n  // the state of our apps\n  const [persons, setPersons] = useState(null);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  // asking for data when the component mounts\n  useEffect(() => {\n    getAll()\n      .then((response) => {\n        setPersons(response.data);\n      })\n      .catch((error) => {\n        setErrorMessage(error.message, \"try again\");\n      });\n  }, [setPersons]);\n\n  // inputs handles\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const handleSearchChange = (e) => {\n    setSearchValue(e.target.value);\n  };\n\n  // handle add person Submit\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const addPerson = () => {\n      const person = {\n        name: newName,\n        number: newNumber,\n      };\n      const registered = persons.find((person) => person.name === newName);\n\n      if (registered) {\n        update(registered.id, person)\n          .then((response) => {\n            setPersons(\n              persons\n                .filter((person) => person.name !== registered.name)\n                .concat(response.data)\n            );\n            setSuccessMessage(`added ${person.name}`);\n            setTimeout(function () {\n              setSuccessMessage(null);\n            }, 3000);\n          })\n          .catch((err) => {\n            setErrorMessage(`${err.response.data.error}`);\n            setTimeout(function () {\n              setErrorMessage(null);\n            }, 3000);\n          });\n      } else {\n        create(person)\n          .then((response) => {\n            setPersons(persons.concat(response.data));\n            setSuccessMessage(`added ${person.name}`);\n            setTimeout(function () {\n              setSuccessMessage(null);\n            }, 3000);\n          })\n          .catch((err) => {\n            setErrorMessage(`${err.response.data.error}`);\n            setTimeout(function () {\n              setErrorMessage(null);\n            }, 3000);\n          });\n      }\n\n      setNewName(\"\");\n      setNewNumber(\"\");\n    };\n\n    addPerson();\n  };\n\n  // Delete person logic\n  const deletePerson = (name, id) => {\n    if (window.confirm(`do you really wanna delete ${name}`)) {\n      remove(id)\n        .then((response) => {\n          setSuccessMessage(`deleted ${name}`);\n          setTimeout(function () {\n            setSuccessMessage(null);\n          }, 3000);\n        })\n        .catch((err) => {\n          setErrorMessage(`${name}'s data is already deleted`);\n          setTimeout(function () {\n            setErrorMessage(null);\n          }, 3000);\n        });\n\n      setPersons(persons.filter((person) => person.id !== id));\n    }\n    return;\n  };\n\n  return (\n    <div>\n      <Success success={successMessage} />\n      <Error error={errorMessage} />\n      <h2>phoneBook</h2>\n      <Filter\n        searchValue={searchValue}\n        handleSearchChange={handleSearchChange}\n      />\n\n      <h3>Add a new</h3>\n      <PersonForm\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        handleSubmit={handleSubmit}\n      />\n\n      <h3>Numbers</h3>\n      <People\n        deletePerson={deletePerson}\n        persons={persons}\n        searchValue={searchValue}\n      />\n    </div>\n  );\n};\n\n// Components\n\nconst Filter = ({ searchValue, handleSearchChange }) => {\n  return (\n    <div>\n      filter show with:\n      <input value={searchValue} onChange={handleSearchChange} />\n    </div>\n  );\n};\n\nconst PersonForm = ({\n  newName,\n  handleSubmit,\n  handleNameChange,\n  newNumber,\n  handleNumberChange,\n}) => {\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        name: <input value={newName} onChange={handleNameChange} />\n      </div>\n      <div>\n        Number: <input value={newNumber} onChange={handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nconst People = ({ searchValue, persons, deletePerson }) => {\n  return (\n    <div>\n      {persons\n        ?.filter((person) => person.name.includes(searchValue))\n        ?.map(\n          ({ name, number, id }) =>\n            name.toLowerCase().includes(searchValue) && (\n              <p key={id}>\n                {name} {number}\n                <button\n                  onClick={() => {\n                    deletePerson(name, id);\n                  }}\n                >\n                  delete\n                </button>\n              </p>\n            )\n        )}\n    </div>\n  );\n};\n\nconst Success = ({ success }) => {\n  if (success === null) {\n    return null;\n  }\n\n  return <h6 className=\"success\"> {success}</h6>;\n};\n\nconst Error = ({ error }) => {\n  if (error === null) {\n    return null;\n  }\n\n  return <h6 className=\"error\"> {error}</h6>;\n};\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}