(this.webpackJsonpmonster=this.webpackJsonpmonster||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(2),c=t(0),l=t.n(c),u=t(13),r=t.n(u),o=t(3),i=t.n(o),s="/api/persons",m=(t(36),function(){var e=Object(c.useState)(null),n=Object(a.a)(e,2),t=n[0],u=n[1],r=Object(c.useState)(""),o=Object(a.a)(r,2),m=o[0],v=o[1],p=Object(c.useState)(""),g=Object(a.a)(p,2),j=g[0],O=g[1],w=Object(c.useState)(""),C=Object(a.a)(w,2),S=C[0],y=C[1],N=Object(c.useState)(null),k=Object(a.a)(N,2),P=k[0],T=k[1],V=Object(c.useState)(null),J=Object(a.a)(V,2),x=J[0],A=J[1];Object(c.useEffect)((function(){i.a.get(s).then((function(e){console.log("promise fulfilled"),u(e.data)})).catch((function(e){A(e.message,"try again")}))}),[u]);return l.a.createElement("div",null,l.a.createElement(b,{success:P}),l.a.createElement(E,{error:x}),l.a.createElement("h2",null,"Phonebook"),l.a.createElement(d,{searchValue:S,handleSearchChange:function(e){y(e.target.value)}}),l.a.createElement("h3",null,"Add a new"),l.a.createElement(h,{handleNameChange:function(e){v(e.target.value)},handlePhoneChange:function(e){O(e.target.value)},handleSubmit:function(e){e.preventDefault();t.find((function(e){return e.name===m}))?alert("".concat(m," has already been registered to your phonebook")):function(){var e,n={name:m,phone:j,id:j};(e=n,i.a.post(s,e)).then((function(e){u(t.concat(e.data)),T("added ".concat(n.name)),setTimeout((function(){T(null)}),3e3)})).catch((function(e){A("error when adding ".concat(n.name)),setTimeout((function(){A(null)}),3e3)})),v(""),O("")}()}}),l.a.createElement("h3",null,"Numbers"),l.a.createElement(f,{deletePerson:function(e,n){window.confirm("do you really wanna delete ".concat(e))&&(function(e){return i.a.delete("".concat(s,"/").concat(e))}(n).then((function(n){T("deleted ".concat(e)),setTimeout((function(){T(null)}),3e3)})).catch((function(n){A("".concat(e,"'s data is already deleted")),setTimeout((function(){A(null)}),3e3)})),u(t.filter((function(e){return e.id!==n}))))},persons:t,searchValue:S}))}),d=function(e){var n=e.searchValue,t=e.handleSearchChange;return l.a.createElement("div",null,"filter show with:",l.a.createElement("input",{value:n,onChange:t}))},h=function(e){var n=e.newName,t=e.handleSubmit,a=e.handleNameChange,c=e.newPhone,u=e.handlePhoneChange;return l.a.createElement("form",{onSubmit:t},l.a.createElement("div",null,"name: ",l.a.createElement("input",{value:n,onChange:a})),l.a.createElement("div",null,"Number: ",l.a.createElement("input",{value:c,onChange:u})),l.a.createElement("div",null,l.a.createElement("button",{type:"submit"},"add")))},f=function(e){var n,t=e.searchValue,a=e.persons,c=e.deletePerson;return l.a.createElement("div",null,null===a||void 0===a||null===(n=a.filter((function(e){return e.name.includes(t)})))||void 0===n?void 0:n.map((function(e,n){var a=e.name,u=e.number,r=e.id;return a.toLowerCase().includes(t)&&l.a.createElement("p",{key:r},a," ",u,l.a.createElement("button",{onClick:function(){return c(a,r)}},"delete"))})))},b=function(e){var n=e.success;return null===n?null:l.a.createElement("h6",{className:"success"}," ",n)},E=function(e){var n=e.error;return null===n?null:l.a.createElement("h6",{className:"error"}," ",n)};r.a.render(l.a.createElement(m,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.833837c6.chunk.js.map